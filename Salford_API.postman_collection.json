{
  "info": {
    "name": "Salford Learning API",
    "description": "Complete API collection for Salford Learning Platform Backend",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "salford-api-v1"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000/api",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ahmed@test.com\",\n  \"password\": \"123456\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            },
            "description": "Register a new user. The 'name' field is optional - if not provided, it will be automatically extracted from the email (part before @).\n\nExample without name:\n{\n  \"email\": \"ahmed.mohamed@test.com\",\n  \"password\": \"123456\"\n}\n‚Üí Username will be: \"ahmed.mohamed\""
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.json().success && pm.response.json().data.token) {",
                  "    pm.environment.set('token', pm.response.json().data.token);",
                  "    pm.collectionVariables.set('token', pm.response.json().data.token);",
                  "    console.log('‚úÖ Token saved to collection variables');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.json().success && pm.response.json().data.token) {",
                  "    pm.environment.set('token', pm.response.json().data.token);",
                  "    pm.collectionVariables.set('token', pm.response.json().data.token);",
                  "    console.log('‚úÖ Token saved to collection variables');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ahmed@test.com\",\n  \"password\": \"123456\",\n  \"rememberMe\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Google Sign In",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.json().success && pm.response.json().data.token) {",
                  "    pm.environment.set('token', pm.response.json().data.token);",
                  "    pm.collectionVariables.set('token', pm.response.json().data.token);",
                  "    console.log('‚úÖ Token saved to collection variables');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"googleId\": \"google_user_id_123\",\n  \"email\": \"user@gmail.com\",\n  \"name\": \"Google User\",\n  \"profilePicture\": \"https://example.com/pic.jpg\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/google",
              "host": ["{{base_url}}"],
              "path": ["auth", "google"]
            }
          }
        },
        {
          "name": "Apple Sign In",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.json().success && pm.response.json().data.token) {",
                  "    pm.environment.set('token', pm.response.json().data.token);",
                  "    pm.collectionVariables.set('token', pm.response.json().data.token);",
                  "    console.log('‚úÖ Token saved to collection variables');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"appleId\": \"apple_user_id_123\",\n  \"email\": \"user@icloud.com\",\n  \"name\": \"Apple User\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/apple",
              "host": ["{{base_url}}"],
              "path": ["auth", "apple"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "Courses",
      "item": [
        {
          "name": "Get All Courses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/courses?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["courses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "category",
                  "value": "ui-ux",
                  "disabled": true
                },
                {
                  "key": "level",
                  "value": "beginner",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Create Course",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Complete UI/UX Design Course\",\n  \"description\": \"Learn UI/UX design from scratch. This comprehensive course covers everything from design principles to advanced prototyping techniques.\",\n  \"shortDescription\": \"Master UI/UX design with hands-on projects\",\n  \"thumbnail\": \"https://example.com/thumbnail.jpg\",\n  \"videoPreview\": \"https://example.com/preview.mp4\",\n  \"category\": \"ui-ux\",\n  \"level\": \"beginner\",\n  \"language\": \"English\",\n  \"requirements\": [\"Basic computer skills\", \"Design software (Figma)\"],\n  \"whatYouWillLearn\": [\"Design principles\", \"User research\", \"Prototyping\", \"Design systems\"],\n  \"isPublished\": false,\n  \"requiredSubscription\": \"pro\",\n  \"chapters\": [\n    {\n      \"title\": \"Introduction\",\n      \"description\": \"Course introduction\",\n      \"order\": 1,\n      \"lessons\": [\n        {\n          \"title\": \"Welcome to the Course\",\n          \"description\": \"Introduction to UI/UX design\",\n          \"videoUrl\": \"https://example.com/video1.mp4\",\n          \"duration\": 10,\n          \"order\": 1,\n          \"isPreview\": true\n        }\n      ]\n    }\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/courses",
              "host": ["{{base_url}}"],
              "path": ["courses"]
            },
            "description": "Create a new course. Requires authentication. The instructor information will be automatically set from the authenticated user if not provided.\n\n‚ö†Ô∏è IMPORTANT: Courses no longer require a price. All courses require Plus subscription (Pro or Premium) to enroll.\n\nRequired fields:\n- title: Course title (min 3 characters)\n- description: Course description (min 10 characters)\n- thumbnail: Thumbnail image URL\n- category: One of ['ui-ux', 'animation', 'graphic-design', 'programming', 'cybersecurity', 'data-science', 'marketing', 'business', 'other']\n\nOptional fields:\n- price: Course price (optional, not used for enrollment - Plus subscription required instead)\n- shortDescription: Short description (max 200 characters)\n- videoPreview: Preview video URL\n- level: 'beginner', 'intermediate', or 'advanced' (default: 'beginner')\n- language: Course language (default: 'English')\n- requirements: Array of requirements\n- whatYouWillLearn: Array of learning outcomes\n- isPublished: Boolean (default: false)\n- isTrending: Boolean (default: false)\n- isPopular: Boolean (default: false)\n- isFeatured: Boolean (default: false)\n- requiredSubscription: 'pro' or 'premium' (default: 'pro') - Plus subscription required\n- chapters: Array of chapter objects with lessons\n- discount: Object with percentage (0-100) and endDate\n\nNote: Users need Plus subscription (Pro or Premium) to enroll in any course."
          }
        },
        {
          "name": "Upload Course Image",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "courseImage",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/courses/upload-image",
              "host": ["{{base_url}}"],
              "path": ["courses", "upload-image"]
            },
            "description": "Upload a course thumbnail/image. Returns the image URL that can be used in the 'thumbnail' field when creating a course.\n\n‚ö†Ô∏è IMPORTANT: \n- Requires authentication\n- File field name must be 'courseImage'\n- Supported formats: jpeg, jpg, png, gif, webp\n- Maximum file size: 5MB\n\nResponse includes:\n- imageUrl: Full URL to access the uploaded image\n- filePath: Relative path to the file\n- filename: Name of the saved file\n\nUse the 'imageUrl' from the response as the 'thumbnail' value when creating a course."
          }
        },
        {
          "name": "Get Trending Courses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/courses/trending",
              "host": ["{{base_url}}"],
              "path": ["courses", "trending"]
            }
          }
        },
        {
          "name": "Get Popular Courses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/courses/popular",
              "host": ["{{base_url}}"],
              "path": ["courses", "popular"]
            }
          }
        },
        {
          "name": "Search Courses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/courses/search?q=ui design",
              "host": ["{{base_url}}"],
              "path": ["courses", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "ui design"
                }
              ]
            }
          }
        },
        {
          "name": "Get Course By ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}",
                "disabled": true
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses/:courseId",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                }
              ]
            }
          }
        },
        {
          "name": "Enroll in Course",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses/:courseId/enroll",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "enroll"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                }
              ]
            },
            "description": "Enroll in a course. Requires Plus subscription (Pro or Premium plan).\n\n‚ö†Ô∏è IMPORTANT: All courses require Plus subscription (Pro or Premium) to enroll. Users without Plus subscription will receive a 403 error.\n\nRequirements:\n- Valid authentication token\n- Active Plus subscription (Pro or Premium plan)\n- Course must exist and be published"
          }
        },
        {
          "name": "Get My Courses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses/my-courses",
              "host": ["{{base_url}}"],
              "path": ["courses", "my-courses"]
            }
          }
        },
        {
          "name": "Add Chapter",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Week 1-2: Introduction to UI/UX Design\",\n  \"description\": \"Get started with the basics of UI/UX design\",\n  \"order\": 1\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/courses/:courseId/chapters",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "chapters"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                }
              ]
            },
            "description": "Add a new chapter (section) to a course. Requires authentication.\n\nüìã REQUIRED Fields:\n- title: Chapter title (min 3 characters)\n\nüìã OPTIONAL Fields:\n- description: Chapter description\n- order: Chapter order (if not provided, will be added at the end)\n\n‚úÖ Example Body:\n{\n  \"title\": \"Week 1-2: Introduction to UI/UX Design\",\n  \"description\": \"Get started with the basics\",\n  \"order\": 1\n}"
          }
        },
        {
          "name": "Update Chapter",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Week 1-2: Introduction to UI/UX Design (Updated)\",\n  \"description\": \"Updated description\",\n  \"order\": 2\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/courses/:courseId/chapters/:chapterId",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "chapters", ":chapterId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                },
                {
                  "key": "chapterId",
                  "value": "your_chapter_id_here"
                }
              ]
            },
            "description": "Update a chapter. Requires authentication.\n\nüìã OPTIONAL Fields (send only what you want to update):\n- title: Chapter title\n- description: Chapter description\n- order: Chapter order\n\n‚úÖ Example Body:\n{\n  \"title\": \"Updated Chapter Title\",\n  \"description\": \"Updated description\"\n}"
          }
        },
        {
          "name": "Delete Chapter",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses/:courseId/chapters/:chapterId",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "chapters", ":chapterId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                },
                {
                  "key": "chapterId",
                  "value": "your_chapter_id_here"
                }
              ]
            },
            "description": "Delete a chapter. This will also delete all lessons in the chapter. Requires authentication.\n\n‚ö†Ô∏è WARNING: This action cannot be undone. All lessons in this chapter will be deleted."
          }
        },
        {
          "name": "Upload Lesson Video",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "video",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/courses/:courseId/chapters/:chapterId/lessons/upload-video",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "chapters", ":chapterId", "lessons", "upload-video"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                },
                {
                  "key": "chapterId",
                  "value": "your_chapter_id_here"
                }
              ]
            },
            "description": "Upload a video file for a lesson. Returns the video URL that can be used when adding/updating a lesson.\n\n‚ö†Ô∏è IMPORTANT:\n- Requires authentication\n- File field name must be 'video'\n- Supported formats: mp4, mov, avi, wmv, flv, webm, mkv\n- Maximum file size: 500MB\n\nResponse includes:\n- videoUrl: Full URL to access the uploaded video\n- Use this videoUrl when adding/updating a lesson"
          }
        },
        {
          "name": "Add Lesson",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "video",
                  "type": "file",
                  "src": "",
                  "description": "Video file (or use videoUrl instead)"
                },
                {
                  "key": "title",
                  "value": "What is UI/UX Design?",
                  "type": "text",
                  "description": "Required: Lesson title"
                },
                {
                  "key": "description",
                  "value": "Understanding the difference between UI and UX",
                  "type": "text",
                  "description": "Optional: Lesson description"
                },
                {
                  "key": "duration",
                  "value": "15",
                  "type": "text",
                  "description": "Optional: Duration in minutes"
                },
                {
                  "key": "order",
                  "value": "1",
                  "type": "text",
                  "description": "Optional: Lesson order"
                },
                {
                  "key": "isPreview",
                  "value": "true",
                  "type": "text",
                  "description": "Optional: Is preview lesson (true/false)"
                },
                {
                  "key": "videoUrl",
                  "value": "",
                  "type": "text",
                  "description": "Optional: Video URL (if not uploading file)",
                  "disabled": true
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/courses/:courseId/chapters/:chapterId/lessons",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "chapters", ":chapterId", "lessons"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                },
                {
                  "key": "chapterId",
                  "value": "your_chapter_id_here"
                }
              ]
            },
            "description": "Add a new lesson to a chapter. You can either upload a video file or provide a videoUrl.\n\n‚ö†Ô∏è IMPORTANT:\n- Requires authentication\n- Either upload a video file OR provide videoUrl (not both)\n\nüìã REQUIRED Fields:\n- title: Lesson title (min 3 characters)\n- video: Video file OR videoUrl (one of them is required)\n\nüìã OPTIONAL Fields:\n- description: Lesson description\n- duration: Duration in minutes (integer)\n- order: Lesson order (if not provided, will be added at the end)\n- isPreview: Boolean (true/false) - Is this a preview lesson?\n- videoUrl: Video URL (if not uploading file)\n\n‚úÖ Method 1: Upload video file\n- Use form-data\n- Add video file in 'video' field\n- Add other fields as text\n\n‚úÖ Method 2: Use video URL\n- Use JSON body\n- Provide videoUrl instead of uploading file\n{\n  \"title\": \"What is UI/UX Design?\",\n  \"videoUrl\": \"https://example.com/video.mp4\",\n  \"duration\": 15,\n  \"order\": 1,\n  \"isPreview\": true\n}"
          }
        },
        {
          "name": "Update Lesson",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "video",
                  "type": "file",
                  "src": "",
                  "description": "Optional: New video file",
                  "disabled": true
                },
                {
                  "key": "title",
                  "value": "What is UI/UX Design? (Updated)",
                  "type": "text",
                  "description": "Optional: Lesson title"
                },
                {
                  "key": "description",
                  "value": "Updated description",
                  "type": "text",
                  "description": "Optional: Lesson description"
                },
                {
                  "key": "duration",
                  "value": "20",
                  "type": "text",
                  "description": "Optional: Duration in minutes"
                },
                {
                  "key": "order",
                  "value": "2",
                  "type": "text",
                  "description": "Optional: Lesson order"
                },
                {
                  "key": "isPreview",
                  "value": "false",
                  "type": "text",
                  "description": "Optional: Is preview lesson"
                },
                {
                  "key": "videoUrl",
                  "value": "",
                  "type": "text",
                  "description": "Optional: Video URL (if not uploading file)",
                  "disabled": true
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/courses/:courseId/chapters/:chapterId/lessons/:lessonId",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "chapters", ":chapterId", "lessons", ":lessonId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                },
                {
                  "key": "chapterId",
                  "value": "your_chapter_id_here"
                },
                {
                  "key": "lessonId",
                  "value": "your_lesson_id_here"
                }
              ]
            },
            "description": "Update a lesson. You can update any field including uploading a new video.\n\n‚ö†Ô∏è IMPORTANT:\n- Requires authentication\n- Send only the fields you want to update\n- If you upload a new video, the old video file will be deleted automatically\n\nüìã OPTIONAL Fields (send only what you want to update):\n- title: Lesson title\n- description: Lesson description\n- duration: Duration in minutes\n- order: Lesson order\n- isPreview: Boolean (true/false)\n- video: New video file (will replace old video)\n- videoUrl: New video URL (will replace old video)\n\n‚úÖ Method 1: Update with form-data (for uploading new video)\n‚úÖ Method 2: Update with JSON (for updating other fields only)\n{\n  \"title\": \"Updated Title\",\n  \"duration\": 20\n}"
          }
        },
        {
          "name": "Delete Lesson",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/courses/:courseId/chapters/:chapterId/lessons/:lessonId",
              "host": ["{{base_url}}"],
              "path": ["courses", ":courseId", "chapters", ":chapterId", "lessons", ":lessonId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                },
                {
                  "key": "chapterId",
                  "value": "your_chapter_id_here"
                },
                {
                  "key": "lessonId",
                  "value": "your_lesson_id_here"
                }
              ]
            },
            "description": "Delete a lesson. The video file will be deleted from the server automatically. Requires authentication.\n\n‚ö†Ô∏è WARNING: This action cannot be undone. The video file will be permanently deleted."
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            }
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Ahmed Updated\",\n  \"email\": \"newemail@test.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            }
          }
        },
        {
          "name": "Upload Profile Picture",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "profilePicture",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/users/profile/picture",
              "host": ["{{base_url}}"],
              "path": ["users", "profile", "picture"]
            }
          }
        },
        {
          "name": "Get Course History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/history",
              "host": ["{{base_url}}"],
              "path": ["users", "history"]
            }
          }
        },
        {
          "name": "Add to History",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/history/:courseId",
              "host": ["{{base_url}}"],
              "path": ["users", "history", ":courseId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                }
              ]
            }
          }
        },
        {
          "name": "Get Certifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/certifications",
              "host": ["{{base_url}}"],
              "path": ["users", "certifications"]
            }
          }
        },
        {
          "name": "Update Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notifications\": true,\n  \"rememberMe\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/settings",
              "host": ["{{base_url}}"],
              "path": ["users", "settings"]
            }
          }
        },
        {
          "name": "Get Payment Methods",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/payment-methods",
              "host": ["{{base_url}}"],
              "path": ["users", "payment-methods"]
            }
          }
        },
        {
          "name": "Add Payment Method",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"visa\",\n  \"cardNumber\": \"4111111111111111\",\n  \"cardHolder\": \"Ahmed Ali\",\n  \"expiryDate\": \"12/25\",\n  \"isDefault\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/payment-methods",
              "host": ["{{base_url}}"],
              "path": ["users", "payment-methods"]
            },
            "description": "Add a payment method to user's account. Requires authentication.\n\nüìã REQUIRED Fields (ŸÖÿ∑ŸÑŸàÿ® - ŸÑÿß ÿ™ŸÇÿ®ŸÑ ŸÜŸÇÿµÿßŸÜ):\n- type: String - One of: 'visa', 'paypal', 'googlepay', 'applepay'\n- cardNumber: String - Full card number (will be stored as last 4 digits only)\n- cardHolder: String - Name of card holder\n- expiryDate: String - Format: 'MM/YY' (e.g., '12/25')\n\nüìã OPTIONAL Fields (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä):\n- isDefault: Boolean - Set as default payment method (default: false)\n\n‚úÖ Example Body (ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ®ÿßŸÑÿ∂ÿ®ÿ∑):\n{\n  \"type\": \"visa\",\n  \"cardNumber\": \"4111111111111111\",\n  \"cardHolder\": \"Ahmed Ali\",\n  \"expiryDate\": \"12/25\",\n  \"isDefault\": true\n}\n\nResponse includes:\n- All payment methods for the user\n- The newly added payment method with its _id (use this _id in Subscribe endpoint if needed)"
          }
        }
      ]
    },
    {
      "name": "Subscriptions",
      "item": [
        {
          "name": "Get All Plans",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/subscriptions/plans",
              "host": ["{{base_url}}"],
              "path": ["subscriptions", "plans"]
            },
            "description": "Get all available subscription plans. This endpoint is public and doesn't require authentication.\n\nReturns:\n- Basic Plan: $9.99/monthly - Access to basic courses\n- Pro Plan: $9.99/monthly - Get certificates and offline access\n- Premium Plan: $9.99/monthly - Exclusive content and VIP support\n\nResponse includes:\n- Plan name, slug, price, billing cycle\n- Description and features list\n- Benefits (access to all courses, certification, offline access, etc.)\n- Sort order for display"
          }
        },
        {
          "name": "Get Plan By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/subscriptions/plans/:planId",
              "host": ["{{base_url}}"],
              "path": ["subscriptions", "plans", ":planId"],
              "variable": [
                {
                  "key": "planId",
                  "value": "your_plan_id_here",
                  "description": "MongoDB ObjectId of the subscription plan"
                }
              ]
            },
            "description": "Get details of a specific subscription plan by ID. This endpoint is public and doesn't require authentication.\n\nTo get plan IDs, first call 'Get All Plans' endpoint and copy the _id from the response.\n\nReturns full plan details including:\n- All plan information\n- Complete features list\n- All benefits and limitations"
          }
        },
        {
          "name": "Get Current Subscription",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/subscriptions/current",
              "host": ["{{base_url}}"],
              "path": ["subscriptions", "current"]
            },
            "description": "Get the current user's active subscription. Requires authentication.\n\nReturns:\n- Subscription plan (basic, pro, or premium)\n- Start date and end date\n- Active status\n\nIf user has no active subscription, returns subscription object with isActive: false"
          }
        },
        {
          "name": "Subscribe to Plan",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Check if token exists",
                  "const token = pm.collectionVariables.get('token') || pm.environment.get('token');",
                  "if (!token || token === '') {",
                  "    console.warn('‚ö†Ô∏è WARNING: No token found! Please login first using:');",
                  "    console.warn('   1. Authentication > Register (or Login)');",
                  "    console.warn('   2. Then try this request again');",
                  "    throw new Error('No authentication token found. Please login first.');",
                  "}",
                  "",
                  "// Validate request body",
                  "try {",
                  "    const body = pm.request.body.raw;",
                  "    if (body) {",
                  "        const bodyObj = JSON.parse(body);",
                  "        const allowedFields = ['planId', 'paymentMethodId'];",
                  "        const bodyFields = Object.keys(bodyObj);",
                  "        const invalidFields = bodyFields.filter(field => !allowedFields.includes(field));",
                  "        ",
                  "        if (invalidFields.length > 0) {",
                  "            console.error('‚ùå ERROR: Invalid fields in body:', invalidFields.join(', '));",
                  "            console.error('‚ö†Ô∏è This endpoint only accepts: planId (required) and paymentMethodId (optional)');",
                  "            console.error('‚ùå Do NOT send: type, cardNumber, cardHolder, expiryDate, etc.');",
                  "            console.error('‚úÖ Correct format: { \"planId\": \"your_plan_id\" }');",
                  "            throw new Error('Invalid fields in request body. Remove: ' + invalidFields.join(', '));",
                  "        }",
                  "        ",
                  "        if (!bodyObj.planId) {",
                  "            throw new Error('planId is required');",
                  "        }",
                  "        ",
                  "        console.log('‚úÖ Body validated successfully');",
                  "    }",
                  "} catch (e) {",
                  "    if (e.message.includes('Invalid fields')) {",
                  "        throw e;",
                  "    }",
                  "    // Ignore JSON parse errors if body is empty",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planId\": \"your_plan_id_here\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/subscriptions/subscribe",
              "host": ["{{base_url}}"],
              "path": ["subscriptions", "subscribe"]
            },
            "description": "Subscribe to a subscription plan. Requires authentication.\n\n‚ö†Ô∏è IMPORTANT: You must login first!\n1. Go to 'Authentication > Login' (or Register)\n2. Run the login request\n3. The token will be saved automatically\n4. Then come back and run this request\n\n‚ö†Ô∏è DEMO MODE: This is a demo/educational version. Payment is automatically marked as completed for testing purposes. No real payment gateway integration.\n\nüìã REQUIRED Fields (ŸÖÿ∑ŸÑŸàÿ® - ŸÑÿß ÿ™ŸÇÿ®ŸÑ ŸÜŸÇÿµÿßŸÜ):\n- planId: String (MongoDB ObjectId) - Get from 'Get All Plans' endpoint\n\nüìã OPTIONAL Fields (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä - ŸäŸÖŸÉŸÜ ÿπÿØŸÖ ÿ•ÿ±ÿ≥ÿßŸÑŸá):\n- paymentMethodId: String (MongoDB ObjectId) - ID of an EXISTING payment method\n  - ‚ö†Ô∏è DO NOT send payment method details (type, cardNumber, cardHolder, expiryDate) here!\n  - ‚ö†Ô∏è If you want to use a payment method, add it first via 'Users > Add Payment Method'\n  - ‚ö†Ô∏è Then use the paymentMethodId (_id) from that response\n  - ‚úÖ If you don't provide paymentMethodId, demo mode will use mock payment data automatically\n\n‚úÖ CORRECT Body (ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿ®ÿßŸÑÿ∂ÿ®ÿ∑ - ÿ®ÿØŸàŸÜ payment method):\n{\n  \"planId\": \"67890abcdef1234567890abc\"\n}\n\n‚úÖ CORRECT Body (ŸÖÿπ payment method - ÿ•ÿ∞ÿß ÿ£ÿ∂ŸÅÿ™Ÿá ŸÖÿ≥ÿ®ŸÇÿßŸã):\n{\n  \"planId\": \"67890abcdef1234567890abc\",\n  \"paymentMethodId\": \"payment_method_id_from_add_payment_method_response\"\n}\n\n‚ùå WRONG - ŸÑÿß ÿ™ÿ±ÿ≥ŸÑ Ÿáÿ∞ÿß:\n{\n  \"planId\": \"...\",\n  \"type\": \"visa\",\n  \"cardNumber\": \"4111...\",\n  \"cardHolder\": \"...\",\n  \"expiryDate\": \"12/25\"\n}\n\n‚úÖ Steps to Subscribe (ÿÆÿ∑Ÿàÿßÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ):\n1. Login using 'Authentication > Login'\n2. Get planId from 'Subscriptions > Get All Plans'\n3. (Optional) Add payment method via 'Users > Add Payment Method' if you want to use one\n4. Call this endpoint with ONLY planId (or planId + paymentMethodId if you added one)\n\nResponse includes:\n- Updated subscription details\n- Payment transaction information\n- Subscription start and end dates"
          }
        },
        {
          "name": "Cancel Subscription",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/subscriptions/cancel",
              "host": ["{{base_url}}"],
              "path": ["subscriptions", "cancel"]
            },
            "description": "Cancel the current active subscription. Requires authentication.\n\nThis will:\n- Mark the subscription as inactive\n- User will lose access to subscription benefits\n- Subscription will remain in user's history\n\nNote: This is a simple cancellation. In production, you might want to implement:\n- Cancellation at end of billing period\n- Refund policies\n- Cancellation reasons\n\nReturns the updated subscription object with isActive: false"
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Process Course Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"courseId\": \"your_course_id_here\",\n  \"paymentMethodId\": \"your_payment_method_id\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/payments/course",
              "host": ["{{base_url}}"],
              "path": ["payments", "course"]
            }
          }
        },
        {
          "name": "Get Payment History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments/history",
              "host": ["{{base_url}}"],
              "path": ["payments", "history"]
            }
          }
        },
        {
          "name": "Get Payment By ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments/:paymentId",
              "host": ["{{base_url}}"],
              "path": ["payments", ":paymentId"],
              "variable": [
                {
                  "key": "paymentId",
                  "value": "your_payment_id_here"
                }
              ]
            }
          }
        },
        {
          "name": "Delete Payment",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/payments/:paymentId",
              "host": ["{{base_url}}"],
              "path": ["payments", ":paymentId"],
              "variable": [
                {
                  "key": "paymentId",
                  "value": "your_payment_id_here"
                }
              ]
            },
            "description": "Delete a payment. You can only delete your own payments. Requires authentication.\n\n‚ö†Ô∏è WARNING: This action cannot be undone.\n\nResponse:\n- Returns success message with deleted payment ID"
          }
        }
      ]
    },
    {
      "name": "Progress",
      "item": [
        {
          "name": "Get All Progress",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/progress",
              "host": ["{{base_url}}"],
              "path": ["progress"]
            }
          }
        },
        {
          "name": "Get Course Progress",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/progress/:courseId",
              "host": ["{{base_url}}"],
              "path": ["progress", ":courseId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                }
              ]
            }
          }
        },
        {
          "name": "Mark Lesson Complete",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timeSpent\": 300\n}"
            },
            "url": {
              "raw": "{{base_url}}/progress/:courseId/lesson/:lessonId",
              "host": ["{{base_url}}"],
              "path": ["progress", ":courseId", "lesson", ":lessonId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                },
                {
                  "key": "lessonId",
                  "value": "your_lesson_id_here"
                }
              ]
            }
          }
        },
        {
          "name": "Reset Course Progress",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/progress/:courseId",
              "host": ["{{base_url}}"],
              "path": ["progress", ":courseId"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "your_course_id_here"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:5000/health",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["health"]
        }
      }
    }
  ]
}
